<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My CloudDiary</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Quicksand:wght@500&display=swap" rel="stylesheet">

  <!-- CSS File -->
  <link rel="stylesheet" href="style.css" />

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDHr1TTUnAjGJyjDOqBuqvo2tnAKiNvdCE",
      authDomain: "my-clouddiary.firebaseapp.com",
      projectId: "my-clouddiary",
      storageBucket: "my-clouddiary.firebasestorage.app",
      messagingSenderId: "859635487485",
      appId: "1:859635487485:web:07bd2c20d274037cade494",
      measurementId: "G-2WVB9HTS5R"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Login function
    window.loginUser = function() {
      const email = document.getElementById("loginEmail").value;
      const password = document.getElementById("loginPassword").value;

      signInWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          alert("Login successful! Welcome " + userCredential.user.email);
          // Redirect after successful login
          window.location.href = "landing.html";
        })
        .catch((error) => {
          alert("Error: " + error.message);
        });
    }

    //Registration function
    window.registerUser = function() {
      const email = document.getElementById("registerEmail").value;
      const password = document.getElementById("registerPassword").value;

      createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          alert("Registration successful! Welcome " + userCredential.user.email);
        })
        .catch((error) => {
          alert("Error: " + error.message);
        });
    }
  </script>
</head>
<body>

  <!-- Section 1: Intro Page -->
  <section class="intro" id="intro">
    <div class="sparkle-container"></div>
    <div class="scroll-down" onclick="scrollToNext()">ðŸ’—</div>
  </section>

  <!-- Section 2: Diary Page -->
  <section class="second" id="second">
    <div class="bubble-container">
      <!-- bubbles will be generated by JS -->
    </div>

    <div class="button-container">
      <button class="btn" id="loginBtn">ðŸŒ· Log In</button>
      <button class="btn" id="registerBtn">ðŸŒ¸ Register</button>

      <!-- Login Form -->
      <div class="form-container" id="loginForm">
        <input type="email" id="loginEmail" placeholder="Email" />
        <input type="password" id="loginPassword" placeholder="Password" />
        <button class="btn" id="loginSubmit" onclick="loginUser()">Log In</button>
        <p class="switch-msg">New user? <span class="switch-link" id="toRegister">Register here</span></p>
      </div>

      <!-- Register Form -->
      <div class="form-container" id="registerForm">
        <input type="email" id="registerEmail" placeholder="Email" />
        <input type="password" id="registerPassword" placeholder="Password" />
        <button class="btn" id="registerSubmit" onclick="registerUser()">Register</button>
        <p class="switch-msg">Already registered? <span class="switch-link" id="toLogin">Login here</span></p>
      </div>
    </div>
  </section>

  <!-- Sparkles on Intro Page -->
  <script>
    const sparkleContainer = document.querySelector('.sparkle-container');
    for(let i=1; i<=100; i++){
      const span = document.createElement('span');
      const rand = Math.random();
      let left;
      if(rand<0.4){ left = Math.random()*25; }
      else if(rand<0.6){ left = 40 + Math.random()*20; }
      else{ left = 75 + Math.random()*25; }
      const top = Math.random()*100;
      const size = 4 + Math.random()*4;
      span.style.setProperty('--i', i);
      span.style.left = left + '%';
      span.style.top = top + '%';
      span.style.width = size + 'px';
      span.style.height = size + 'px';
      sparkleContainer.appendChild(span);
    }
  </script>

  <!-- Bubbles on Second Page -->
  <script>
    const bubbleContainer = document.querySelector('.bubble-container');
    for(let i=1; i<=30; i++){
      const span = document.createElement('span');
      const size = 30 + Math.random()*60;
      span.style.width = size+'px';
      span.style.height = size+'px';
      span.style.left = Math.random()*100 + '%';
      span.style.animationDuration = (6 + Math.random()*6)+'s';
      span.style.animationDelay = Math.random()*5+'s';
      bubbleContainer.appendChild(span);
    }
  </script>

  <!-- Scroll and Form Toggle -->
 <script>
const loginBtn = document.getElementById("loginBtn");
const registerBtn = document.getElementById("registerBtn");
const loginForm = document.getElementById("loginForm");
const registerForm = document.getElementById("registerForm");
const toRegister = document.getElementById("toRegister");
const toLogin = document.getElementById("toLogin");
const buttonContainer = document.querySelector(".button-container");

loginBtn.addEventListener("click", () => {
  loginForm.style.display = "flex";
  registerForm.style.display = "none";
  // hide the buttons themselves
  loginBtn.style.display = "none";
  registerBtn.style.display = "none";
});

registerBtn.addEventListener("click", () => {
  registerForm.style.display = "flex";
  loginForm.style.display = "none";
  loginBtn.style.display = "none";
  registerBtn.style.display = "none";
});

toRegister.addEventListener("click", () => {
  registerForm.style.display = "flex";
  loginForm.style.display = "none";
});

toLogin.addEventListener("click", () => {
  loginForm.style.display = "flex";
  registerForm.style.display = "none";
});
</script>
</body>
</html>
